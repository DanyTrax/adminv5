# =============================================
# HTACCESS ESPECÍFICO PARA INSTALACIÓN
# =============================================

RewriteEngine On

# Rewrite interno para archivos de instalación
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

# Proteger archivos de configuración
<Files "config-instalacion.php">
    Order Allow,Deny
    Deny from all
</Files>

# Proteger logs
<Files "*.log">
    Order Allow,Deny
    Deny from all
</Files>

# Permitir solo AJAX POST para ajax-datos.php
<Files "ajax-datos.php">
    <RequireAll>
        Require method POST
        Require local
    </RequireAll>
</Files>

# Configuración PHP para instalación
php_flag display_errors On
php_value error_reporting "E_ALL"
php_value session.gc_maxlifetime 3600
php_value session.cookie_lifetime 3600

# Headers de seguridad específicos
<IfModule mod_headers.c>
    Header always set X-Frame-Options DENY
    Header always set X-Robots-Tag "noindex, nofollow"
</IfModule>

# Prevenir listado de directorios
Options -Indexes